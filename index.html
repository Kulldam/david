<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi invitación - Mi graduación 2026</title>
  <style>
    :root{
      --bg:#f7f5f2;
      --accent:#c99b3a; /* dorado */
      --text:#111;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0;background:var(--bg);font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}

    /* Carta/envelope */
    .envelope{width:min(820px,95vw);max-width:900px;aspect-ratio:16/9;position:relative;perspective:1200px}
    .card-face{position:absolute;inset:0;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.15);overflow:hidden;background:white;display:flex;align-items:center;justify-content:center}
    .front{background:linear-gradient(180deg,#fff 0,#fbf8f6 100%);z-index:3}
    .paper{padding:40px;text-align:center}
    .title{font-size:clamp(20px,4vw,48px);font-weight:700;color:var(--text);letter-spacing:0.02em}
    .subtitle{font-size:clamp(12px,2.2vw,18px);color:#666;margin-top:8px}

    /* Flap (sello area) */
    .flap{position:absolute;top:0;left:0;right:0;height:55%;transform-origin:top center;border-radius:14px 14px 0 0;background:linear-gradient(180deg,#fff,#f3efe9);z-index:4;display:flex;align-items:center;justify-content:center;transition:transform 1s cubic-bezier(.2,.9,.28,1)}
    .flap.open{transform:rotateX(180deg);box-shadow:inset 0 -40px 60px rgba(0,0,0,.06)}

    .sello{width:110px;height:110px;border-radius:999px;background:radial-gradient(circle at 30% 30%,#fff,#f3f0ec);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 18px rgba(0,0,0,.2);transition:transform .28s ease}
    .sello:active{transform:scale(.96)}

    .sello .seal-text{font-weight:700;color:var(--accent);font-size:14px}

    /* envelope back (inner paper that will be revealed) */
    .inner{position:absolute;inset:8% 6%;background:linear-gradient(180deg,#fff,#fffbf8);z-index:2;border-radius:8px;padding:28px;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transform:translateY(18px);transition:opacity .6s ease,transform .6s ease}
    .envelope.open .inner{opacity:1;transform:translateY(0)}

    .open-hint{margin-top:18px;font-size:14px;color:#444}

    /* small note for accessibility */
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

    footer{position:fixed;left:16px;bottom:18px;font-size:13px;color:#666}

    @media (max-width:520px){.sello{width:86px;height:86px}.title{font-size:20px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="envelope" id="envelope">
      <div class="card-face front">
        <div class="paper">
          <div class="title">Mi graduación 2026</div>
          <div class="subtitle">Estás cordialmente invitado</div>
        </div>
      </div>

      <div class="flap" id="flap">
        <div class="sello" id="sello" aria-label="Abrir invitación">
          <div class="seal-text">APOSTILLA</div>
        </div>
      </div>

      <div class="card-face inner" id="inner">
        <div>
          <h2 class="title">David Mamani Condori</h2>
          <p class="open-hint">Haz click en el sello para abrir la invitación</p>
        </div>
      </div>
    </div>
  </div>

  <audio id="audio" loop preload="auto">
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3" type="audio/mpeg">
  </audio>

  <script>
    const sello = document.getElementById('sello');
    const flap = document.getElementById('flap');
    const envelope = document.getElementById('envelope');
    const inner = document.getElementById('inner');
    const audio = document.getElementById('audio');

    // Ajuste de volumen inicial bajo y amigable
    audio.volume = 0.15;

    function unlockAudioAndOpen(){
      // Algunos navegadores suspenden audio hasta que se resume la ctx
      const playPromise = audio.play();
      if (playPromise !== undefined) {
        playPromise.catch(() => {
          // Intenta crear contexto resumido (seguro en evento click)
          try{window.AudioContext = window.AudioContext || window.webkitAudioContext; const ctx = new AudioContext(); ctx.resume(); audio.play().catch(()=>{});}catch(e){}
        });
      }

      flap.classList.add('open');
      envelope.classList.add('open');

      // Después de animación, hacer redirect a invite.html
      setTimeout(()=>{
        window.location.href = 'invite.html';
      },1100);
    }

    sello.addEventListener('click', function(e){
      unlockAudioAndOpen();
    });

    // accesibilidad: Enter / Space triggers
    sello.tabIndex = 0;
    sello.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); unlockAudioAndOpen(); } });
  </script>
</body>
</html>

